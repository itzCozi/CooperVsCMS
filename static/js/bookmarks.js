function tryParse(e){try{return JSON.parse(e)}catch(t){return null}}function initBookmarks(e=0){if(e>5)return;let t=localStorage.getItem("bookmarks"),n=document.querySelector(".bookmarks");null!==t&&Array.isArray(tryParse(t))?JSON.parse(t).forEach(e=>{let[t,r,o]=e,a=document.createElement("a");a.textContent=o,a.setAttribute("id","bookmarka"),a.style.backgroundImage="url("+r+")",a.style.color=localStorage.getItem("tabacttit"),a.href=t,a.addEventListener("contextmenu",function(t){[0].forEach.call(document.getElementsByClassName("bkmks"),e=>{e.parentElement.removeChild(e)}),t.preventDefault();let{pageX:n,pageY:r}=t,o=document.createElement("div");o.style.position="fixed",o.style.left=n+"px",o.style.top=r+"px",o.style.backgroundColor=localStorage.getItem("tabbkg"),o.setAttribute("id","bmenu");let l=document.createElement("ul");l.setAttribute("id","bul"),l.style.color=localStorage.getItem("nt"),[{name:"Delete",func(){a.parentElement.removeChild(a),removeBookmark(e)}},].forEach(e=>{let t=document.createElement("li");t.style.color=localStorage.getItem("nt"),l.appendChild(t),t.setAttribute("id","bul"),t.setAttribute("class","bkmks"),t.textContent=e.name,t.addEventListener("click",t=>{t.preventDefault(),e.func()})}),o.appendChild(l);let i=function(){o.parentElement&&o.parentElement.removeChild(o),window.removeEventListener("input",i)};document.body.appendChild(o),window.addEventListener("click",i)}),n.appendChild(a)}):(localStorage.setItem("bookmarks","[ ]"),initBookmarks(e+1))}function removeBookmark(e){let t=JSON.parse(localStorage.getItem("bookmarks"));index=t.indexOf(e),console.log(e),t.splice(index,1),localStorage.setItem("bookmarks",JSON.stringify(t))}document.head.insertAdjacentHTML("beforebegin",`<style>.bookmarks {background: ${localStorage.getItem("tabact")}; height: 29.2px; position: absolute; left: 0; right: 0; top: 0;}</style>`),window.addEventListener("DOMContentLoaded",initBookmarks),document.body.style.backgroundColor=localStorage.getItem("tabact");